{
	"version": 3,
	"names": [
		"extend",
		"addEdges",
		"Modification",
		"makeModifier",
		"aspectRatio",
		"start",
		"arg",
		"state",
		"rect",
		"edges",
		"pageCoords",
		"coords",
		"ratio",
		"enabled",
		"options",
		"equalDelta",
		"modifiers",
		"width",
		"height",
		"startCoords",
		"startRect",
		"linkedEdges",
		"top",
		"left",
		"bottom",
		"right",
		"xIsPrimaryAxis",
		"sign",
		"edgeSign",
		"x",
		"y",
		"length",
		"subModification",
		"interaction",
		"copyFrom",
		"modification",
		"prepareStates",
		"startAll",
		"set",
		"initialCoords",
		"aspectMethod",
		"setEqualDelta",
		"setRatio",
		"correctedRect",
		"result",
		"setAll",
		"prevCoords",
		"prevRect",
		"delta",
		"changed",
		"xIsCriticalAxis",
		"Math",
		"abs",
		"eventProps",
		"defaults",
		"newHeight",
		"newWidth"
	],
	"sources": [
		"aspectRatio.ts"
	],
	"sourcesContent": [
		"/**\n * @module modifiers/aspectRatio\n *\n * @description\n * This module forces elements to be resized with a specified dx/dy ratio.\n *\n * ```js\n * interact(target).resizable({\n *   modifiers: [\n *     interact.modifiers.snapSize({\n *       targets: [ interact.snappers.grid({ x: 20, y: 20 }) ],\n *     }),\n *     interact.aspectRatio({ ratio: 'preserve' }),\n *   ],\n * });\n * ```\n */\n\nimport type { Point, Rect, EdgeOptions } from '@interactjs/core/types'\nimport extend from '@interactjs/utils/extend'\nimport { addEdges } from '@interactjs/utils/rect'\n\nimport Modification from './Modification'\nimport { makeModifier } from './base'\nimport type { Modifier, ModifierModule, ModifierState } from './types'\n\nexport interface AspectRatioOptions {\n  ratio?: number | 'preserve'\n  equalDelta?: boolean\n  modifiers?: Modifier[]\n  enabled?: boolean\n}\n\nexport type AspectRatioState = ModifierState<\nAspectRatioOptions,\n{\n  startCoords: Point\n  startRect: Rect\n  linkedEdges: EdgeOptions\n  ratio: number\n  equalDelta: boolean\n  xIsPrimaryAxis: boolean\n  edgeSign: {\n    x: number\n    y: number\n  }\n  subModification: Modification\n}\n>\n\nconst aspectRatio: ModifierModule<AspectRatioOptions, AspectRatioState> = {\n  start (arg) {\n    const { state, rect, edges, pageCoords: coords } = arg\n    let { ratio, enabled } = state.options\n    const { equalDelta, modifiers } = state.options\n\n    if (ratio === 'preserve') {\n      ratio = rect.width / rect.height\n    }\n\n    state.startCoords = extend({}, coords)\n    state.startRect = extend({}, rect)\n    state.ratio = ratio\n    state.equalDelta = equalDelta\n\n    const linkedEdges = (state.linkedEdges = {\n      top: edges.top || (edges.left && !edges.bottom),\n      left: edges.left || (edges.top && !edges.right),\n      bottom: edges.bottom || (edges.right && !edges.top),\n      right: edges.right || (edges.bottom && !edges.left),\n    })\n\n    state.xIsPrimaryAxis = !!(edges.left || edges.right)\n\n    if (state.equalDelta) {\n      const sign = (linkedEdges.left ? 1 : -1) * (linkedEdges.top ? 1 : -1)\n      state.edgeSign = {\n        x: sign,\n        y: sign,\n      }\n    } else {\n      state.edgeSign = {\n        x: linkedEdges.left ? -1 : 1,\n        y: linkedEdges.top ? -1 : 1,\n      }\n    }\n\n    if (enabled !== false) {\n      extend(edges, linkedEdges)\n    }\n\n    if (!modifiers?.length) return\n\n    const subModification = new Modification(arg.interaction)\n\n    subModification.copyFrom(arg.interaction.modification)\n    subModification.prepareStates(modifiers)\n\n    state.subModification = subModification\n    subModification.startAll({ ...arg })\n  },\n\n  set (arg) {\n    const { state, rect, coords } = arg\n    const { linkedEdges } = state\n    const initialCoords = extend({}, coords)\n    const aspectMethod = state.equalDelta ? setEqualDelta : setRatio\n\n    extend(arg.edges, linkedEdges)\n    aspectMethod(state, state.xIsPrimaryAxis, coords, rect)\n\n    if (!state.subModification) {\n      return null\n    }\n\n    const correctedRect = extend({}, rect)\n\n    addEdges(linkedEdges, correctedRect, {\n      x: coords.x - initialCoords.x,\n      y: coords.y - initialCoords.y,\n    })\n\n    const result = state.subModification.setAll({\n      ...arg,\n      rect: correctedRect,\n      edges: linkedEdges,\n      pageCoords: coords,\n      prevCoords: coords,\n      prevRect: correctedRect,\n    })\n\n    const { delta } = result\n\n    if (result.changed) {\n      const xIsCriticalAxis = Math.abs(delta.x) > Math.abs(delta.y)\n\n      // do aspect modification again with critical edge axis as primary\n      aspectMethod(state, xIsCriticalAxis, result.coords, result.rect)\n      extend(coords, result.coords)\n    }\n\n    return result.eventProps\n  },\n\n  defaults: {\n    ratio: 'preserve',\n    equalDelta: false,\n    modifiers: [],\n    enabled: false,\n  },\n}\n\nfunction setEqualDelta ({ startCoords, edgeSign }: AspectRatioState, xIsPrimaryAxis: boolean, coords: Point) {\n  if (xIsPrimaryAxis) {\n    coords.y = startCoords.y + (coords.x - startCoords.x) * edgeSign.y\n  } else {\n    coords.x = startCoords.x + (coords.y - startCoords.y) * edgeSign.x\n  }\n}\n\nfunction setRatio (\n  { startRect, startCoords, ratio, edgeSign }: AspectRatioState,\n  xIsPrimaryAxis: boolean,\n  coords: Point,\n  rect: Rect,\n) {\n  if (xIsPrimaryAxis) {\n    const newHeight = rect.width / ratio\n\n    coords.y = startCoords.y + (newHeight - startRect.height) * edgeSign.y\n  } else {\n    const newWidth = rect.height * ratio\n\n    coords.x = startCoords.x + (newWidth - startRect.width) * edgeSign.x\n  }\n}\n\nexport default makeModifier(aspectRatio, 'aspectRatio')\nexport { aspectRatio }\n"
	],
	"mappings": "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"
}